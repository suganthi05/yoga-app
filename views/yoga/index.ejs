<% include ../partials/header %>


<!-- begin: sj -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css" />
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>

<!-- Icon library for adding star -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!-- end: sj -->
<div class="container">
  <script src="/scripts/index.js"></script>
  <!--Aa-->
  <header class="jumbotron">
    <div class="container">
      <h1>Welcome To Yoga!</h1>
      <p>Explore yoga studios across the greater Toronto area!</p>
      <p>
        <a class="btn btn-primary btn-large" href="/yoga">View All Yoga Studios</a>
        <a class="btn btn-primary btn-large" href="/yoga/new">Add New Yoga Studio</a>
        <a class="btn btn-primary btn-large" href="/yoga/getfavorites">My Favorites</a>


      <p>
      <form action="/yoga" method="GET" class="form-inline">
        <div class="form-group">
          <!--begin: sj-->
          <input type="text" name="name_search" placeholder="Yoga Studio name" class="form-control">
          <input type="text" name="location_search" placeholder="Location name" class="form-control">
          <!-- begin: sj - bootstrap multi select dropdown added for classes -->
          <select class="selectpicker" title="Select classes" multiple data-live-search="true">
            <option value="Hatha Yoga">Hatha Yoga</option>
            <option value="Bikram Yoga">Bikram Yoga</option>
            <option value="Hot Yoga">Hot Yoga</option>
            <option value="Prenatal Yoga">Prenatal Yoga</option>
            <option value="Vinyasa Yoga">Vinyasa Yoga</option>
          </select>
          <!-- end: sj - bootstrap multi select dropdown added for classes -->
          
          <!-- begin: sj - bootstrap multi select dropdown added for amenities -->
          <select class="selectpicker" title="Select amenities" multiple data-live-search="true">    
            <option value="Parking">Parking</option>
            <option value="Wifi">Wifi</option>
            <option value="Lockers">Lockers</option>
            <option value="Showers">Showers</option>
            <option value="Smoothie Bar">Smoothie Bar</option>
          </select>
          <!-- end: sj - bootstrap multi select dropdown added for amenities -->



          <select name="rating_search" class="form-control">
            <option value="select">Select Rating</option>
            <option value="5">5</option>
            <option value="4">4</option>
            <option value="3">3</option>
            <option value="2">2</option>
            <option value="1">1</option>
          </select>      

        <select name="level_search" class="form-control">
            <option value="select">Select Level</option>
            <option value="Beginner">Beginner</option>
            <option value="Beginner">Intermediate</option>
            <option value="Advanced">Advanced</option>
          </select>   
        <select name="price_search" class="form-control">
            <option value="select">Select Price</option>
            <option value="Low">$</option>
            <option value="Medium">$$</option>
            <option value="High">$$$</option>
          </select>   

          <button id="filterbutton" class="btn btn-default">Search</button>
          <!--end: sj-->

        </div>
      </form>
      </p>
    </div>
  </header>
  <!--aa-->
  <div id="map" class="halfmap"></div>
  <script type="text/javascript" async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCcrlOjVKHhFlqVzG9Fp96FmZNYDF-0gG4&callback=initMap"></script>
  <!--aa-->
  <div id="search-result" class="row text-center" style="display:flex; flex-wrap: wrap;">
    <div class="col-md-12">
      <% if(noMatch !== null) { %>
      <h3>
        <%= noMatch %>
      </h3>
      <% } %>
    </div>
    <% yoga.forEach(function(yoga){ %>
    <div class="col-md-3 col-sm-6">
      <div class="thumbnail">
        <img src="<%= yoga.image %>">
        <div class="caption">
          <h4>
            <%= yoga.name %>
          </h4>
        </div>
        <p>
          <!-- begin: sj - show amenities using awesome font --> 
          |<% yoga.amenities.forEach(function(amenities){ %>
            <% if (amenities === "Parking") { %>
              <span class="fa fa-car" title="Parking"></span> | 
            <% } else if (amenities === "Wifi") { %>
              <span class="fa fa-wifi" title="Wifi"></span> | 
            <% } else if (amenities === "Lockers") { %>
              <span class="fa fa-lock"  title="Locker"></span> | 
            <% } else if (amenities === "Showers") { %>
              <span class="fa fa-shower"  title="Shower"></span> | 
            <% } else if (amenities === "Smoothie Bar") { %>
              <span class="fa fa-coffee" title="Smoothie Bar"></span> | 
            <%}%> 
          <% }); %>
          <br /><br /> 
          <!-- end: sj - show amenities using awesome font -->
          <!-- begin: sj - display rating star -->
          <% for (var i = 0; i < 5 ; i++) { %>
            <% if (i < yoga.rating) { %>
              <span class="fa fa-star checked"></span>
            <%} else {%>
              <span class="fa fa-star unchecked"></span>
            <% } %>
          <% }; %>
          &nbsp;&nbsp;
          <!-- end: sj - display rating star -->
          <a href="/yoga/<%= yoga._id %>" class="btn btn-primary">More Info</a>
        </p>
      </div>
    </div>
    <% }); %>
  </div>


</div>
<% include ../partials/footer %>